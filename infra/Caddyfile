api.lunarus.ru {

  encode zstd gzip

  # WebSocket gateway
  reverse_proxy /gateway server:8080

  # REST API
  reverse_proxy /auth/* server:8080

  reverse_proxy /users* server:8080
  reverse_proxy /servers* server:8080
  reverse_proxy /invites* server:8080

  # Legacy path kept for compatibility with older clients
  reverse_proxy /guilds* server:8080

  # Servers (guilds) + related endpoints
  reverse_proxy /servers* server:8080
  reverse_proxy /invites* server:8080

  # Channels + messages
  reverse_proxy /channels* server:8080
  reverse_proxy /voice/* server:8080
  reverse_proxy /upload* server:8080
  reverse_proxy /tenor/* server:8080

  # LiveKit
  reverse_proxy /rtc* livekit:7880
  reverse_proxy /twirp* livekit:7880
}
